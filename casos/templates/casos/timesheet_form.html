<!-- casos/templates/casos/timesheet_form.html -->
{% extends 'core/base.html' %}

{% block title %}Editar Lançamento de Horas{% endblock %}
{% block page_title %}Editar Lançamento de Horas{% endblock %}

{% block content %}
<div class="card">
    <div class="card-body">
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <div class="mt-4">
                <button type="submit" class="btn btn-primary">Salvar Alterações</button>
                <a href="{% url 'casos:caso_detail' object.caso.pk %}#timesheet-tab-pane" class="btn btn-secondary">Cancelar</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ block.super }}
<!-- Script para a máscara de tempo (HH:MM) -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const tempoInput = document.querySelector('[name="tempo_str"]');
    if (tempoInput && typeof IMask !== 'undefined') {
        const timeMaskOptions = { mask: 'HH:MM', blocks: { HH: { mask: IMask.MaskedRange, from: 0, to: 99 }, MM: { mask: IMask.MaskedRange, from: 0, to: 59 }}};
        IMask(tempoInput, timeMaskOptions);
    }
});
</script>
{% endblock %}